function Banner(){this.bannerGroup=$("#banner-group"),this.listenBannerHover(),this.bannerUl=$("#banner-ul"),this.rightArrow=$(".right-arrow"),this.leftArrow=$(".left-arrow"),this.liList=this.bannerUl.children("li"),this.liCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var t=this;t.page=2,t.category_id=0,t.loadBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),i=((new Date).getTime()-e)/1e3;return i<60?"刚刚":60<=i&&i<3600?(minutes=parseInt(i/60),minutes+"分钟前"):3600<=i&&i<86400?(hours=parseInt(i/60/60),hours+"小时前"):86400<=i&&i<2592e3?(days=parseInt(i/60/60/24),days+"天前"):n.getFullYear()+n.getMonth()+n.getDay()+n.getHours()}}Banner.prototype.initbannerul=function(){this.bannerUl.css({width:798*this.liCount})},Banner.prototype.initPageControl=function(){for(var t=this,n=0;n<t.liCount;n++){var e=$("<li></li>");t.pageControl.append(e),0===n&&e.addClass("active")}t.pageControl.css({width:10*t.liCount+16+16*t.liCount})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(t,n){$(n).click(function(){e.index=t,e.animate(),$(n).addClass("active").siblings().removeClass("active")})})},Banner.prototype.toggleArrow=function(t){var n=this;t?(n.leftArrow.show(),n.rightArrow.show()):(n.rightArrow.hide(),n.leftArrow.hide())},Banner.prototype.animate=function(){this.bannerUl.animate({left:-798*this.index}),this.pageControl.children("li").eq(this.index).addClass("active").siblings().removeClass("active")},Banner.prototype.arrowClick=function(){var t=this;this.rightArrow.click(function(){console.log(t.index),t.index===t.liCount-1?t.index=0:t.index++,t.animate()}),this.leftArrow.click(function(){0===t.index?t.index=t.liCount-1:t.index--,t.animate()})},Banner.prototype.listenBannerHover=function(){var t=this;this.bannerGroup.hover(function(){clearInterval(t.timer),t.toggleArrow(!0)},function(){t.loop(),t.toggleArrow(!1)})},Banner.prototype.loop=function(){var t=this;t.index=1,t.timer=setInterval(function(){t.index==t.liCount&&(t.index=0),t.animate(),t.index++},2e3)},Banner.prototype.run=function(){this.loop(),this.initPageControl(),this.initbannerul(),this.listenPageControl()},Index.prototype.listenLoadmoreBtn=function(){var i=this;i.loadBtn.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page},success:function(t){if(200===t.code){var n=t.data;if(0<n.length){var e=template("news-item",{newses:n});$(".list-inner-group").append(e),i.page+=1}else i.loadBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:o,p:1},success:function(t){if(200===t.code){var n=t.data,e=template("news-item",{newses:n}),i=$(".list-inner-group");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadmoreBtn(),this.listenCategorySwitchEvent()},$(function(){var t=new Banner;t.arrowClick(),t.run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJHcm91cCIsIiQiLCJsaXN0ZW5CYW5uZXJIb3ZlciIsImJhbm5lclVsIiwicmlnaHRBcnJvdyIsImxlZnRBcnJvdyIsImxpTGlzdCIsImNoaWxkcmVuIiwibGlDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGVmYXVsdFZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRlcyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJob3VycyIsImRheXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91cnMiLCJwcm90b3R5cGUiLCJpbml0YmFubmVydWwiLCJjc3MiLCJ3aWR0aCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhcHBlbmQiLCJhZGRDbGFzcyIsImxpc3RlblBhZ2VDb250cm9sIiwiZWFjaCIsImluZGV4Iiwib2JqIiwiY2xpY2siLCJhbmltYXRlIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJsZWZ0IiwiZXEiLCJhcnJvd0NsaWNrIiwiY29uc29sZSIsImxvZyIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVyIiwibG9vcCIsInNldEludGVydmFsIiwicnVuIiwibGlzdGVuTG9hZG1vcmVCdG4iLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImxpIiwiYXR0ciIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSIsImJhbm5lciJdLCJtYXBwaW5n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ZnlELEVBQUssR0FFVEMsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlDLEVBQVNELEVBQWEsS0FDdEJFLEVBQU0zRCxTQUFTLFlBQVksQ0FBQzBELE9BQVNBLElBRXJDSyxFQUFnQjlFLEVBQUUscUJBQ3RCOEUsRUFBY0MsUUFDZEQsRUFBY3RDLE9BQU9rQyxHQUNyQi9ELEVBQUtDLEtBQU8sRUFDWkQsRUFBS0UsWUFBY0EsRUFDbkIrRCxFQUFHbkMsU0FBUyxVQUFVTyxXQUFXQyxZQUFZLFVBQzdDdEMsRUFBS0csUUFBUXNDLGNBUWpDMUMsTUFBTXVCLFVBQVUrQixJQUFNLFdBQ1BsRSxLQUNObUUsb0JBRE1uRSxLQUVONkUsNkJBR1QzRSxFQUFFLFdBQ0UsSUFBSWdGLEVBQVMsSUFBSW5GLE9BQ2pCbUYsRUFBT3hCLGFBQ1B3QixFQUFPaEIsT0FDSyxJQUFLdEQsT0FDWHNEIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcigpIHtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKVxyXG4gICAgdGhpcy5iYW5uZXJVbD0gJChcIiNiYW5uZXItdWxcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpXHJcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoXCIubGVmdC1hcnJvd1wiKVxyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIilcclxuICAgIHRoaXMubGlDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aFxyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpXHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdGJhbm5lcnVsID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wid2lkdGhcIjo3OTgqc2VsZi5saUNvdW50fSlcclxufVxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKXtcclxuICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgZm9yICh2YXIgaT0wO2kgPCBzZWxmLmxpQ291bnQ7aSsrKXtcclxuICAgICAgICB2YXIgY2lyY2xlID0gJChcIjxsaT48L2xpPlwiKVxyXG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgaWYgKGkgPT09MCl7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOiBzZWxmLmxpQ291bnQqMTArOCoyKzE2KnNlbGYubGlDb3VudH0pXHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyICBzZWxmID0gdGhpc1xyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LG9iaikge1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXg9aW5kZXhcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKClcclxuICAgICAgICAgICAgJChvYmopLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIilcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KXtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgICAgICBpZiAoaXNTaG93KXtcclxuICAgICAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpXHJcbiAgICAgICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKVxyXG4gICAgICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKClcclxuICAgICAgICB9XHJcbn1cclxuQmFubmVyLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMuYmFubmVyVWwuYW5pbWF0ZSh7XCJsZWZ0XCI6LTc5OCp0aGlzLmluZGV4fSk7XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEodGhpcy5pbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKVxyXG5cclxufVxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5hcnJvd0NsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmluZGV4KVxyXG4gICAgICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gKHNlbGYubGlDb3VudCAtMSkpe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbmRleD0wXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmluZGV4KytcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKVxyXG4gICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICB0aGlzLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApe1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5saUNvdW50IC0xXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoXHJcbiAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpXHJcbiAgICAgICAgICAgIHNlbGYudG9nZ2xlQXJyb3codHJ1ZSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5sb29wKClcclxuICAgICAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSlcclxuICAgICAgICB9XHJcbiAgICApXHJcbn1cclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgc2VsZi5pbmRleD0xXHJcbiAgIHNlbGYudGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgaWYgKHNlbGYuaW5kZXggPT0gc2VsZi5saUNvdW50KXtcclxuICAgICAgICAgICBzZWxmLmluZGV4PTBcclxuICAgICAgIH1cclxuICAgICAgIHNlbGYuYW5pbWF0ZSgpXHJcbiAgICAgICBzZWxmLmluZGV4KytcclxuICAgfSwyMDAwKVxyXG59XHJcblxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxvb3AoKVxyXG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKVxyXG4gICAgdGhpcy5pbml0YmFubmVydWwoKVxyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIEluZGV4KCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XHJcbiAgICBzZWxmLmxvYWRCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XHJcbiAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVTaW5jZSA9IGZ1bmN0aW9uIChkZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRlZmF1bHRWYWx1ZSlcclxuICAgICAgICB2YXIgZGF0ZXMgPSBkYXRlLmdldFRpbWUoKVxyXG4gICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKClcclxuICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0ZXMpLzEwMDBcclxuICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA8IDYwKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJyB9XHJcbiAgICBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAqNjApIHtcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MClcclxuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzICsn5YiG6ZKf5YmNJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICBlbHNlIGlmICggdGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0ICkge1xyXG4gICAgICAgICAgICAgICAgaG91cnMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICBob3VycyArIFwi5bCP5pe25YmNXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgZWxzZSBpZiAodGltZXN0YW1wID49IDYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKSB7XHJcbiAgICAgICAgICAgICAgICBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCAvIDI0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRheXMgKyAn5aSp5YmNJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKVxyXG4gICAgICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKClcclxuICAgICAgICAgICAgICAgIHJldHVybiB5ZWFyK21vbnRoK2RheStob3VyXHJcbiAgICAgICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRtb3JlQnRuID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgZGF0YTp7XHJcbiAgICAgICAgICAgICAgICAncCc6c2VsZi5wYWdlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld3Nlcy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIse1wibmV3c2VzXCI6bmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRhYkdyb3VwID0gJChcIi5saXN0LXRhYlwiKTtcclxuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRoaXPvvJrku6PooajlvZPliY3pgInkuK3nmoTov5nkuKpsaeagh+etvlxyXG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cihcImRhdGEtY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcclxuICAgICAgICAgICAgICAgICdwJzogMVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbXB0ee+8muWPr+S7peWwhui/meS4quagh+etvuS4i+eahOaJgOacieWtkOWFg+e0oOmDveWIoOaOiVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzTGlzdEdyb3VwID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5JbmRleC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRtb3JlQnRuKCk7XHJcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKVxyXG59XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKClcclxuICAgIGJhbm5lci5hcnJvd0NsaWNrKClcclxuICAgIGJhbm5lci5ydW4oKVxyXG4gICAgdmFyIGluZGV4ID0gbmV3ICBJbmRleCgpXHJcbiAgICBpbmRleC5ydW4oKVxyXG59KSJdfQ==
